<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Regions, domains, and URL formats | Open architecture notes</title> <meta name="author" content="Vidak Mijailovic"> <meta name="description" content="A few ways of segmenting public facing DNS and URLs so that we can efficiently scale and combine cloud and on-premise environments"> <meta name="keywords" content="vidak mijailovic vidmij software-architecture event-driven events data-engineering tutorial guide kafka netigate"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%93%91&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://vidakm.github.io/blog/2023/regions_domains_dns/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">{
      "title": "Regions, domains, and URL formats",
      "description": "A few ways of segmenting public facing DNS and URLs so that we can efficiently scale and combine cloud and on-premise environments",
      "published": "December 28, 2023",
      "authors": [
        {
          "author": "Vidak Mijailovic",
          "authorURL": "https://www.threads.net/@vidmij",
          "affiliations": [
            {
              "name": "KTH, Netigate",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">Open architecture notes</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">notes<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">landscapes</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Regions, domains, and URL formats</h1> <p>A few ways of segmenting public facing DNS and URLs so that we can efficiently scale and combine cloud and on-premise environments</p> </d-title><d-byline></d-byline><d-article> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/blog_images/regions_domains_dns/banner_regions_domains_dns-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/blog_images/regions_domains_dns/banner_regions_domains_dns-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/blog_images/regions_domains_dns/banner_regions_domains_dns-1400.webp"></source> <img src="/assets/blog_images/regions_domains_dns/banner_regions_domains_dns.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Composing URLs for a multi cloud and premise deployment strategy can be complex as there are many aspects to consider. Here we will walk through a few common ones and propose alternatives to solving them.</p> <ul> <li>How to structure an app URL to work across hybrid deployments and shifting customer base.</li> <li>Segment public facing and private app APIs.</li> <li>Exposing product URLs with clear namespaces and objectives.</li> </ul> <h3 id="subdomain-per-tenant---for-complex-deployments">Subdomain per tenant - for complex deployments</h3> <p>There are frequent shifts in needs for data and customer hosting and we need a good strategy for dealing with them. Regulations such as GDPR and Schrems II are posing new requirements on data retention and storage and there are more regulations developing. In tandem, customer needs are constantly shifting and in some segments such as fintech and insurance, we need a flexible strategy for managing access and hosting, even enabling hybrid scenarios such as partial on-premises or multi-cloud.</p> <p>By enabling customers to access their apps using a subdomain as prefix to our public URL, we can hide a lot of the complexity and enable hybrid scenarios while also simplifying our ingress and monitoring strategy. A customer can sign into our master URL and get proxied to their SaaS or on-premises solution depending on package used. Example: CX product might be SaaS based while the EX is on-premises.</p> <p>This also simplifies global access, as we can partition customers by region and datacenter and route a specific subdomain to the nearest datacenter hosting customer data. Anycast and other DNS technologies can aid us here with a transparent interface.</p> <p>Furthermore, as each customer could have a dedicated subdomain ingress, we can scale and tier them independently while also simplifying monitoring. Customers would be differenciated in each request path, simplifying tracing and ingress monitoring by eliminating the need to lookup headers, GUIDs or tokens.</p> <p>Proposal: <code class="language-plaintext highlighter-rouge">&lt;customer&gt;.&lt;company&gt;.&lt;tld&gt;</code> Example: <code class="language-plaintext highlighter-rouge">contoso.netigate.io</code></p> <iframe frameborder="0" style="width:100%;height:600px" src="https://viewer.diagrams.net/?highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=Page-1#R%3Cdiagram%20id%3D%22dyaV8iSs9fHPUTYwCFle%22%20name%3D%22Page-1%22%3E%0A%20%20%20%20%3CmxGraphModel%20dx%3D%221876%22%20dy%3D%22753%22%20grid%3D%221%22%20gridSize%3D%2210%22%20guides%3D%221%22%20tooltips%3D%221%22%20connect%3D%221%22%20arrows%3D%221%22%20fold%3D%221%22%20page%3D%221%22%20pageScale%3D%221%22%20pageWidth%3D%22850%22%20pageHeight%3D%221100%22%20math%3D%220%22%20shadow%3D%220%22%3E%0A%20%20%20%20%20%20%3Croot%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%221%22%20parent%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-2%22%20value%3D%22Contoso%20on-premise%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23d5e8d4%3BstrokeColor%3D%2382b366%3Bdashed%3D1%3BverticalAlign%3Dtop%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22442.5%22%20y%3D%22636.25%22%20width%3D%22235%22%20height%3D%22187.5%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-5%22%20value%3D%22contoso.netigate.io%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-3%22%20target%3D%22teANNRpSb0PYtAI6VP0J-4%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-3%22%20value%3D%22Contoso%20customer%22%20style%3D%22shape%3DumlActor%3BverticalLabelPosition%3Dbottom%3BverticalAlign%3Dtop%3Bhtml%3D1%3BoutlineConnect%3D0%3BfillColor%3D%23d5e8d4%3BstrokeColor%3D%2382b366%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22350%22%20y%3D%22300%22%20width%3D%2230%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-14%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.25%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.88%3BentryY%3D0.25%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-4%22%20target%3D%22teANNRpSb0PYtAI6VP0J-6%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-15%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.75%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0%3BentryY%3D0.25%3BentryDx%3D0%3BentryDy%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-4%22%20target%3D%22teANNRpSb0PYtAI6VP0J-2%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-4%22%20value%3D%22Ingress%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22305%22%20y%3D%22500%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-6%22%20value%3D%22Netigate%20Cloud%22%20style%3D%22ellipse%3Bshape%3Dcloud%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BverticalAlign%3Dtop%3BlabelPosition%3Dcenter%3BverticalLabelPosition%3Dmiddle%3Balign%3Dcenter%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20y%3D%22610%22%20width%3D%22310%22%20height%3D%22260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-7%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%2295%22%20y%3D%22700%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-8%22%20value%3D%22EX%20cluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22500%22%20y%3D%22700%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-10%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22105%22%20y%3D%22710%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-11%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22115%22%20y%3D%22720%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-12%22%20value%3D%22CX%20cluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22125%22%20y%3D%22730%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-21%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.25%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.4%3BentryY%3D0.1%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-16%22%20target%3D%22teANNRpSb0PYtAI6VP0J-17%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-22%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.75%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.25%3BentryY%3D0.25%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-16%22%20target%3D%22teANNRpSb0PYtAI6VP0J-6%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-16%22%20value%3D%22Ingress%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-50%22%20y%3D%22490%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-17%22%20value%3D%22%22%20style%3D%22ellipse%3Bshape%3Dcloud%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BverticalAlign%3Dtop%3BlabelPosition%3Dcenter%3BverticalLabelPosition%3Dmiddle%3Balign%3Dcenter%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-205%22%20y%3D%22620%22%20width%3D%22310%22%20height%3D%22260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-19%22%20value%3D%22snow.netigate.io%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3B%22%20parent%3D%221%22%20source%3D%22teANNRpSb0PYtAI6VP0J-18%22%20target%3D%22teANNRpSb0PYtAI6VP0J-16%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-18%22%20value%3D%22Snow%20customer%22%20style%3D%22shape%3DumlActor%3BverticalLabelPosition%3Dbottom%3BverticalAlign%3Dtop%3Bhtml%3D1%3BoutlineConnect%3D0%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-5%22%20y%3D%22300%22%20width%3D%2230%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22teANNRpSb0PYtAI6VP0J-20%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-110%22%20y%3D%22700%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%228KYwdBs535azIACHWppv-1%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-100%22%20y%3D%22710%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%228KYwdBs535azIACHWppv-2%22%20value%3D%22%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-90%22%20y%3D%22720%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%228KYwdBs535azIACHWppv-3%22%20value%3D%22EX%20cluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22-80%22%20y%3D%22730%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%3C%2Froot%3E%0A%20%20%20%20%3C%2FmxGraphModel%3E%0A%20%20%3C%2Fdiagram%3E"></iframe> <h3 id="api-endpoints---apps-and-product-vs-customer-apis">API endpoints - Apps and product vs customer APIs</h3> <h4 id="ui-app-bentomicrofrontends-tbd-publish">UI app (<img class="emoji" title=":bento:" alt=":bento:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f371.png" height="20" width="20">Microfrontends )(TBD publish)</h4> <p>All clients should be served through a dedicated path to accommodate micro-frontends. A user should be able to reach a domain and browse a multitude of clients without noticing they are leaving the domain. For example, <code class="language-plaintext highlighter-rouge">company.io/persona</code>, then going to <code class="language-plaintext highlighter-rouge">company.io/settings</code> and finally <code class="language-plaintext highlighter-rouge">company.io/reporting</code>. This is key to micro frontends. (Microfrontends architecture)(TBD publish)</p> <p>Proposal for UI: <code class="language-plaintext highlighter-rouge">&lt;customer&gt;.&lt;company&gt;.&lt;tld&gt;/&lt;client-service-name&gt;</code></p> <p>Example: <code class="language-plaintext highlighter-rouge">contoso.netigate.io/reports</code></p> <h4 id="bff--satellitebffs-and-event-driven-design">BFF <a href="/blog/2023/bffs_and_event_driven/">( <img class="emoji" title=":satellite:" alt=":satellite:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f4e1.png" height="20" width="20">BFFs and Event Driven Design.)</a> </h4> <p>All BFF APIs should be using the domain with <code class="language-plaintext highlighter-rouge">/api</code> as path prefix followed by their <code class="language-plaintext highlighter-rouge">service-name</code>, combined into <code class="language-plaintext highlighter-rouge">/api/&lt;service-name&gt;</code>. Preferably, their <code class="language-plaintext highlighter-rouge">service-name</code> is similar or same to their <code class="language-plaintext highlighter-rouge">client-service-name</code>.</p> <p>Proposal for BFF: <code class="language-plaintext highlighter-rouge">&lt;customer&gt;.&lt;company&gt;.&lt;tld&gt;/api/&lt;service-name&gt;</code></p> <p>Example: <code class="language-plaintext highlighter-rouge">contoso.netigate.io/api/reports</code></p> <p>If a BFF is expected to have high throughput and is a general service endpoint, they might deserve a dedicated ingress or even their own subdomain. An example of this could be a generic survey response BFF serving a survey response app.</p> <p>Proposal for BFF: <code class="language-plaintext highlighter-rouge">&lt;endpoint-service-name&gt;.&lt;company&gt;.&lt;tld&gt;</code></p> <p>Example: <code class="language-plaintext highlighter-rouge">response.netigate.io</code></p> <h4 id="customer-api">Customer API</h4> <p>Customer APIs, whose purpose is to enable customer integration as means of selling value should be separated from BFF APIs. As these services are not BFFs but backend services that expose APIs directly to customers, they can have varying loads and throughput and often place strains on scalability in different patterns from Apps and BFFs. It can be lucrative to combine multiple BFFs into a single Customer API too, which should be avoided as usage from one category might affect the others. We want the ability to scale the app and Customer API independently.</p> <p>Customer APIs are often deployed to dedicated clusters and often have dedicated read-only DB replicas following <a href="/blog/2023/cqrs_and_state/">( <img class="emoji" title=":flags:" alt=":flags:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f38f.png" height="20" width="20">CQRS and state in Event Driven Services )</a>.</p> <p>As they are generic endpoints for integrations, they are not segmented per customer but instead directly use API as subdomains. Customers are identified using tokens. This also eliminates confusion if an API is used internally, externally or both.</p> <p>Proposal for customer API: <code class="language-plaintext highlighter-rouge">api.&lt;company&gt;.&lt;tld&gt;</code> Examples from current production: <code class="language-plaintext highlighter-rouge">api.netigate.io</code></p> <iframe frameborder="0" style="width:100%;height:600px" src="https://viewer.diagrams.net/?highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=Page-1#R%3Cdiagram%20id%3D%22I_L6XFVfx7peOCtkc3d5%22%20name%3D%22Page-1%22%3E%0A%20%20%20%20%3CmxGraphModel%20dx%3D%221026%22%20dy%3D%22753%22%20grid%3D%221%22%20gridSize%3D%2210%22%20guides%3D%221%22%20tooltips%3D%221%22%20connect%3D%221%22%20arrows%3D%221%22%20fold%3D%221%22%20page%3D%221%22%20pageScale%3D%221%22%20pageWidth%3D%22850%22%20pageHeight%3D%221100%22%20math%3D%220%22%20shadow%3D%220%22%3E%0A%20%20%20%20%20%20%3Croot%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%221%22%20parent%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-4%22%20value%3D%22Browser%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-3%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-2%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-1%22%20value%3D%22App%20server%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23fff2cc%3BstrokeColor%3D%23d6b656%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%2290%22%20y%3D%22490%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-5%22%20value%3D%22company.io%2Fapp%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.25%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3BfontStyle%3D1%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-2%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-1%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-7%22%20value%3D%22company.io%2Fapi%2Fapp%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3BfontStyle%3D1%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-2%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-6%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-2%22%20value%3D%22Ingress%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22240%22%20y%3D%22330%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-3%22%20value%3D%22Customer%20user%22%20style%3D%22shape%3DumlActor%3BverticalLabelPosition%3Dbottom%3BverticalAlign%3Dtop%3Bhtml%3D1%3BoutlineConnect%3D0%3BfillColor%3D%23d5e8d4%3BstrokeColor%3D%2382b366%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22285%22%20y%3D%22160%22%20width%3D%2230%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-16%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-6%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-14%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-19%22%20value%3D%22Fact%20Event%22%20style%3D%22rounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D1%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3Bdashed%3D1%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-6%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-18%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CmxPoint%20x%3D%22380%22%20y%3D%22650%22%20as%3D%22targetPoint%22%3E%3C%2FmxPoint%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-6%22%20value%3D%22App%20BFF%26lt%3Bbr%26gt%3Bservice%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22240%22%20y%3D%22540%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-22%22%20value%3D%22Command%20Event%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0%3BexitY%3D0.5%3BexitDx%3D0%3BexitDy%3D0%3Bdashed%3D1%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-8%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%0A%20%20%20%20%20%20%20%20%20%20%20%20%3CmxPoint%20x%3D%22400%22%20y%3D%22570%22%20as%3D%22targetPoint%22%3E%3C%2FmxPoint%3E%0A%20%20%20%20%20%20%20%20%20%20%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-24%22%20value%3D%22Read%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-8%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-15%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-8%22%20value%3D%22Customer%20API%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22560%22%20y%3D%22540%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-13%22%20value%3D%22api.company.io%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3BfontStyle%3D1%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-9%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-8%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-9%22%20value%3D%22API%20Ingress%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22560%22%20y%3D%22330%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-12%22%20value%3D%22REST%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D1%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.5%3BentryY%3D0%3BentryDx%3D0%3BentryDy%3D0%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-11%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-9%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-11%22%20value%3D%22Customer%20System%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23d5e8d4%3BstrokeColor%3D%2382b366%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22560%22%20y%3D%22170%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-14%22%20value%3D%22App%20DB%22%20style%3D%22shape%3Dcylinder3%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BboundedLbl%3D1%3BbackgroundOutline%3D1%3Bsize%3D15%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22270%22%20y%3D%22680%22%20width%3D%2260%22%20height%3D%2280%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-15%22%20value%3D%22API%26lt%3Bbr%26gt%3BDB%22%20style%3D%22shape%3Dcylinder3%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BboundedLbl%3D1%3BbackgroundOutline%3D1%3Bsize%3D15%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22590%22%20y%3D%22680%22%20width%3D%2260%22%20height%3D%2280%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-20%22%20value%3D%22Write%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D1%3BexitY%3D0.5%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0%3BentryY%3D0.5%3BentryDx%3D0%3BentryDy%3D0%3BentryPerimeter%3D0%3B%22%20parent%3D%221%22%20source%3D%227L9R_EJUAJjGKzS3VA7I-18%22%20target%3D%227L9R_EJUAJjGKzS3VA7I-15%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%227L9R_EJUAJjGKzS3VA7I-18%22%20value%3D%22API%26lt%3Bbr%26gt%3BData%20Aggregator%22%20style%3D%22rounded%3D0%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22400%22%20y%3D%22690%22%20width%3D%22120%22%20height%3D%2260%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%3C%2Froot%3E%0A%20%20%20%20%3C%2FmxGraphModel%3E%0A%20%20%3C%2Fdiagram%3E"></iframe> <h4 id="product-url---for-independent-teams">Product URL - for independent teams</h4> <p>As the product portfolio grows it is common to deploy multiple products over time which also need to scale independently and have their own ingresses. This might not just be necessary for the global ingress, but also for the backend ingress, as each product or service might be hosted independently. As the we have discussed in this article - Microfrontends architecture - you might even want to split up a single app into multiple views.</p> <p>Thus, we need the ability to differentiate common components between their product domains. For example, both the EX and CX product might have a Response Service, which has the same purpose, but very different implementations tailored to specific domains.</p> <p>To keep service names clear it is good to differentiate the URL based on the domain or namespace when deploying to production.</p> <p>Proposal: <code class="language-plaintext highlighter-rouge">&lt;customer&gt;.&lt;company&gt;.&lt;tld&gt;/api/&lt;namespace&gt;/&lt;service&gt;</code></p> <p>Example EX: <code class="language-plaintext highlighter-rouge">contoso.netigate.io/api/ex/response</code> Example CX: <code class="language-plaintext highlighter-rouge">contoso.netigate.io/api/cx/response</code></p> <p>Proposal for UI: <code class="language-plaintext highlighter-rouge">&lt;customer&gt;.&lt;company&gt;.&lt;tld&gt;/&lt;namespace&gt;/&lt;client-service-name&gt;</code></p> <p>Example: <code class="language-plaintext highlighter-rouge">contoso.netigate.io/ex/reports</code></p> <h3 id="summary-example-for-customer-contoso">Summary example for customer Contoso:</h3> <p>Showing a customer Contoso accessing the EX-module and browsing the distribution settings.</p> <p>Customer portal for login <code class="language-plaintext highlighter-rouge">company.io/login</code> with BFF auth from <code class="language-plaintext highlighter-rouge">company.io/api/auth</code>. After auth, forwarding to app : <code class="language-plaintext highlighter-rouge">contoso.company.io/ex/app</code> served from BFF at <code class="language-plaintext highlighter-rouge">contoso.company.io/api/ex/app</code>. Customer API for integrations is dedicated at: <code class="language-plaintext highlighter-rouge">api.company.io</code></p> <h3 id="multi-cloud-and-event-driven-service">Multi-cloud and Event Driven Service</h3> <p>As services can communicate asynchronously through events using for example Aiven Kafka at scale, events can be used to decouple services and orchestrate complex workflows across different domains and clouds.</p> <p>By using events, services do not need to know the location or availability of other services, which eliminates the need for a Service Mesh, Service Discovery and advanced DNS configurations. Event Driven Service design with Kafka and Events can enable simple cross cloud architectures that are scalable, resilient and adaptable.</p> <iframe frameborder="0" style="width:100%;height:500px" src="https://viewer.diagrams.net/?highlight=0000ff&amp;edit=_blank&amp;layers=1&amp;nav=1&amp;title=Page-1#R%3Cdiagram%20id%3D%22uFcEHmxiQlrF9eXB60eq%22%20name%3D%22Page-1%22%3E%0A%20%20%20%20%3CmxGraphModel%20dx%3D%221026%22%20dy%3D%22753%22%20grid%3D%221%22%20gridSize%3D%2210%22%20guides%3D%221%22%20tooltips%3D%221%22%20connect%3D%221%22%20arrows%3D%221%22%20fold%3D%221%22%20page%3D%221%22%20pageScale%3D%221%22%20pageWidth%3D%22850%22%20pageHeight%3D%221100%22%20math%3D%220%22%20shadow%3D%220%22%3E%0A%20%20%20%20%20%20%3Croot%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%221%22%20parent%3D%220%22%3E%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-8%22%20value%3D%22AWS%20-%20Germany%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BverticalAlign%3Dtop%3BfillColor%3D%23ffe6cc%3BstrokeColor%3D%23d79b00%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22940%22%20y%3D%22365%22%20width%3D%22240%22%20height%3D%22170%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-7%22%20value%3D%22Azure%20-%20Germany%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BverticalAlign%3Dtop%3BfillColor%3D%23dae8fc%3BstrokeColor%3D%236c8ebf%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22340%22%20y%3D%22365%22%20width%3D%22240%22%20height%3D%22170%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-24%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D1%3BexitY%3D0.5%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0%3BentryY%3D0.5%3BentryDx%3D0%3BentryDy%3D0%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3BstrokeWidth%3D7%3BendArrow%3Dnone%3BendFill%3D0%3B%22%20parent%3D%221%22%20source%3D%22gFCxo6tIv8YRuZwduO35-4%22%20target%3D%22gFCxo6tIv8YRuZwduO35-10%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-28%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0%3BexitY%3D0.5%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D1%3BentryY%3D0.5%3BentryDx%3D0%3BentryDy%3D0%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3BstrokeWidth%3D7%3BendArrow%3Dnone%3BendFill%3D0%3B%22%20parent%3D%221%22%20source%3D%22gFCxo6tIv8YRuZwduO35-4%22%20target%3D%22gFCxo6tIv8YRuZwduO35-26%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-4%22%20value%3D%22Aiven%26lt%3Bbr%26gt%3BKafka%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22670%22%20y%3D%22400%22%20width%3D%22160%22%20height%3D%22110%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-10%22%20value%3D%22Kubernetes%26amp%3Bnbsp%3B%26lt%3Bbr%26gt%3BCluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22960%22%20y%3D%22395%22%20width%3D%22200%22%20height%3D%22120%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-12%22%20value%3D%22UpCloud%20-%20Germany%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3BverticalAlign%3Dtop%3BfillColor%3D%23d5e8d4%3BstrokeColor%3D%2382b366%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22520%22%20y%3D%22620%22%20width%3D%22460%22%20height%3D%22210%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-19%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D0%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.25%3BentryY%3D1%3BentryDx%3D0%3BentryDy%3D0%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3BstrokeWidth%3D7%3BendArrow%3Dnone%3BendFill%3D0%3B%22%20parent%3D%221%22%20source%3D%22gFCxo6tIv8YRuZwduO35-14%22%20target%3D%22gFCxo6tIv8YRuZwduO35-4%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-14%22%20value%3D%22Kubernetes%26amp%3Bnbsp%3B%26lt%3Bbr%26gt%3BCluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22540%22%20y%3D%22650%22%20width%3D%22200%22%20height%3D%22160%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-18%22%20style%3D%22edgeStyle%3DorthogonalEdgeStyle%3Brounded%3D0%3BorthogonalLoop%3D1%3BjettySize%3Dauto%3Bhtml%3D1%3BexitX%3D0.5%3BexitY%3D0%3BexitDx%3D0%3BexitDy%3D0%3BentryX%3D0.75%3BentryY%3D1%3BentryDx%3D0%3BentryDy%3D0%3BfillColor%3D%23e1d5e7%3BstrokeColor%3D%239673a6%3BstrokeWidth%3D7%3BendArrow%3Dnone%3BendFill%3D0%3B%22%20parent%3D%221%22%20source%3D%22gFCxo6tIv8YRuZwduO35-15%22%20target%3D%22gFCxo6tIv8YRuZwduO35-4%22%20edge%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20relative%3D%221%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-15%22%20value%3D%22Kubernetes%26amp%3Bnbsp%3B%26lt%3Bbr%26gt%3BCluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22760%22%20y%3D%22650%22%20width%3D%22200%22%20height%3D%22160%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%20%20%3CmxCell%20id%3D%22gFCxo6tIv8YRuZwduO35-26%22%20value%3D%22Kubernetes%26amp%3Bnbsp%3B%26lt%3Bbr%26gt%3BCluster%22%20style%3D%22rounded%3D1%3BwhiteSpace%3Dwrap%3Bhtml%3D1%3B%22%20parent%3D%221%22%20vertex%3D%221%22%3E%0A%20%20%20%20%20%20%20%20%20%20%3CmxGeometry%20x%3D%22360%22%20y%3D%22395%22%20width%3D%22200%22%20height%3D%22120%22%20as%3D%22geometry%22%3E%3C%2FmxGeometry%3E%0A%20%20%20%20%20%20%20%20%3C%2FmxCell%3E%0A%20%20%20%20%20%20%3C%2Froot%3E%0A%20%20%20%20%3C%2FmxGraphModel%3E%0A%20%20%3C%2Fdiagram%3E"></iframe> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> </div> <footer class="sticky-bottom mt-5"> <div class="container"> Â© Copyright 2023 Vidak Mijailovic. </div> </footer> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>