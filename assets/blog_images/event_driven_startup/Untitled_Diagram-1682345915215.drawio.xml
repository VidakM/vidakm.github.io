<?xml version="1.0" encoding="UTF-8"?> <mxfile host="ac.draw.io" modified="2023-12-28T12:20:22.125Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1.2 Safari/605.1.15" etag="QF5TRrAHXVVZAmSZT72c" version="22.1.15" type="embed"> <diagram id="GJ2Zds_a5kHFQdM2GBFA" name="Page-1"> <mxGraphModel dx="1026" dy="1853" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100" math="0" shadow="0"> <root> <mxCell id="0"/> <mxCell id="1" parent="0"/> <mxCell id="zmbUQ67jIpYHCDtvd6vR-17" value="New Service" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;fontStyle=1;spacingLeft=13;" parent="1" vertex="1"> <mxGeometry x="1120" y="300" width="320" height="380" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-1" value="Service A" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;fontStyle=1;spacingLeft=13;" parent="1" vertex="1"> <mxGeometry x="320" y="90" width="280" height="430" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-68" value="Calculate&lt;br&gt;State" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-2" target="zmbUQ67jIpYHCDtvd6vR-51" edge="1"> <mxGeometry relative="1" as="geometry"> <Array as="points"> <mxPoint x="410" y="300"/> <mxPoint x="410" y="373"/> </Array> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-69" value="Emit Event&lt;br&gt;(Outbox pattern)" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0;exitDx=0;exitDy=27.5;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-2" target="zmbUQ67jIpYHCDtvd6vR-4" edge="1"> <mxGeometry x="0.3601" relative="1" as="geometry"> <Array as="points"> <mxPoint x="370" y="288"/> <mxPoint x="370" y="472"/> </Array> <mxPoint as="offset"/> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-2" value="Table A" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"> <mxGeometry x="440" y="260" width="60" height="80" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-70" value="Fact event" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-4" target="zmbUQ67jIpYHCDtvd6vR-20" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-4" value="Event bus" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=90;direction=west;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"> <mxGeometry x="475" y="400" width="50" height="145" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-64" value="Write" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-7" target="zmbUQ67jIpYHCDtvd6vR-2" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-7" value="Logic" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="430" y="120" width="80" height="80" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-8" value="Command" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" target="zmbUQ67jIpYHCDtvd6vR-7" edge="1"> <mxGeometry relative="1" as="geometry"> <mxPoint x="470" as="sourcePoint"/> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-76" value="Fact event" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-9" target="zmbUQ67jIpYHCDtvd6vR-20" edge="1"> <mxGeometry x="-0.4937" relative="1" as="geometry"> <Array as="points"> <mxPoint x="730" y="590"/> <mxPoint x="730" y="473"/> </Array> <mxPoint x="1" as="offset"/> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-9" value="Service B" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;fontStyle=1;spacingLeft=13;" parent="1" vertex="1"> <mxGeometry x="320" y="545" width="280" height="90" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-18" value="DB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#e1d5e7;strokeColor=#9673a6;align=left;" parent="1" vertex="1"> <mxGeometry x="1265" y="540" width="110" height="120" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-19" value="4 subscribe to Fact Events&lt;br&gt;from snapshot&lt;br&gt;Timestamp" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-20" target="zmbUQ67jIpYHCDtvd6vR-23" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-20" value="Event bus" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;rotation=90;direction=west;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1"> <mxGeometry x="820" y="400" width="50" height="145" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-21" value="Append deltas" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-23" target="zmbUQ67jIpYHCDtvd6vR-57" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-23" value="Event&lt;br&gt;Listener" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="1185" y="432.5" width="80" height="80" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-51" target="zmbUQ67jIpYHCDtvd6vR-73" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"> <mxGeometry x="440" y="362.5" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-52" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="440" y="382.5" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-53" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="440" y="402.5" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-57" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="1295" y="580" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-58" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1"> <mxGeometry x="1295" y="600" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-59" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="1295" y="620" width="60" height="20" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-72" value="2. Fetch current state&lt;br&gt;Note down Timestamp" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;strokeWidth=3;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-60" target="zmbUQ67jIpYHCDtvd6vR-73" edge="1"> <mxGeometry relative="1" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-78" value="3. Populate with&lt;br&gt;current state&lt;br&gt;snapshot" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-60" target="zmbUQ67jIpYHCDtvd6vR-58" edge="1"> <mxGeometry relative="1" as="geometry"> <Array as="points"> <mxPoint x="1400" y="373"/> <mxPoint x="1400" y="610"/> </Array> </mxGeometry> </mxCell> <mxCell id="Qgjr72f6qV9EJS4OuahX-1" value="1. Create &lt;br&gt;DB" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;fillColor=#d5e8d4;strokeColor=#82b366;strokeWidth=3;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-60" edge="1"> <mxGeometry relative="1" as="geometry"> <mxPoint x="1320" y="540" as="targetPoint"/> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-60" value="Startup&lt;br&gt;Module" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="1185" y="332.5" width="80" height="80" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-73" value="API" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"> <mxGeometry x="560" y="332.5" width="80" height="80" as="geometry"/> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-77" value="Fact event" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="zmbUQ67jIpYHCDtvd6vR-75" target="zmbUQ67jIpYHCDtvd6vR-20" edge="1"> <mxGeometry x="-0.6456" y="-5" relative="1" as="geometry"> <Array as="points"> <mxPoint x="730" y="705"/> <mxPoint x="730" y="473"/> </Array> <mxPoint x="1" as="offset"/> </mxGeometry> </mxCell> <mxCell id="zmbUQ67jIpYHCDtvd6vR-75" value="Service C" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=left;fontStyle=1;spacingLeft=13;" parent="1" vertex="1"> <mxGeometry x="320" y="660" width="280" height="90" as="geometry"/> </mxCell> </root> </mxGraphModel> </diagram> </mxfile>